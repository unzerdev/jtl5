{"version":3,"sources":["node_modules/browser-pack/_prelude.js","frontend/src/js/app.js","frontend/src/js/payments/applepay.js","frontend/src/js/payments/general.js","frontend/src/js/payments/instalment.js","frontend/src/js/utils/debugging.js","frontend/src/js/utils/errors.js","node_modules/@babel/runtime/helpers/classCallCheck.js","node_modules/@babel/runtime/helpers/createClass.js","node_modules/@babel/runtime/helpers/defineProperty.js","node_modules/@babel/runtime/helpers/interopRequireDefault.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_applepay","_interopRequireDefault","_general","_instalment","window","HpPayment","HpInstalment","UnzerApplePay","_errors","_debugging","ApplePaySnippetsDefaults","NOT_SUPPORTED","CANCEL_BY_USER","ApplePay","pubKey","applePayPaymentRequest","snippets","settings","_classCallCheck2","this","Object","assign","options","locale","unzerInstance","unzer","errorHandler","$errorContainer","$errorMessage","debugging","$","UNZER_DEBUG","_isSandbox","config","hasSandboxKey","ApplePaySession","canMakePayments","form","document","getElementById","initPaymentType","bind","addEventListener","on","unsupportedDevice","event","_this","preventDefault","session","log","paymentRequest","onvalidatemerchant","merchantValidationCallback","onpaymentauthorized","applePayAuthorizedCallback","oncancel","show","begin","_this2","validationUrl","JSON","stringify","validationURL","ajax","url","evo","io","ioUrl","method","dataType","data","done","validationResponse","completeMerchantValidation","alert","message","fail","error","statusText","abort","self","unzerApplePayInstance","paymentData","payment","token","createResource","then","createdResource","typeId","id","result","status","transactionStatus","completePayment","STATUS_SUCCESS","hiddenInput","createElement","setAttribute","appendChild","removeEventListener","submit","abortPaymentSession","submitButton","disabled","ariaDisabled","STATUS_FAILURE","UnzerPayment","type","customerId","customerResource","paymentType","handleFormSubmit","autoSubmit","Event","PAYMENT_TYPES","CARD","createCard","INVOICE","createInvoice","INVOICE_GUARANTEED","createInvoiceGuaranteed","INVOICE_FACTORING","createInvoiceFactoring","SEPA","createSepa","SEPA_GUARANTEED","createSepaGuaranteed","PAYPAL","createPaypal","SOFORT","createSofort","GIROPAY","createGiropay","PRZELEWY24","createPrzelewy24","IDEAL","createIdeal","PREPAYMENT","createPrepayment","EPS","createEPS","FLEXIPAY_DIRECT","createFlexiPayDirect","ALIPAY","createAlipay","WECHAT_PAY","createWeChatPay","HIRE_PURCHASE","createHirePurchase","PAYLATER_INVOICE","createPaylaterInvoice","BANCONTACT","createBancontact","PAYLATER_INSTALLMENT","createPaylaterInstallment","resources","push","updateCustomer","createCustomer","Promise","all","hiddenCstInput","paymentTypeName","arguments","undefined","multipleValidation","Customer","isB2B","B2BCustomer","customerObj","customer","continueButton","containerId","showInfoBox","showHeader","initFormFields","console","getAttribute","success","removeAttribute","fields","update","create","paylaterInstallment","PaylaterInstallment","amount","currency","country","currentStep","action","paylaterInvoice","PaylaterInvoice","customerType","bancontact","Bancontact","styling","fontSize","fontColor","fontFamily","Card","onlyIframe","formFieldValid","hide","number","expiry","cvc","Invoice","InvoiceSecured","Sepa","SepaDirectDebit","SepaGuaranteed","SepaDirectDebitSecured","Paypal","Sofort","Giropay","Przelewy24","_this3","Ideal","value","Prepayment","FlexiPayDirect","Alipay","Wechatpay","InstallmentSecured","effectiveInterest","orderDate","response","msg","details","forEach","err","customerMessage","currentSteep","modalSelector","btn","$form","modal","trigger","is","Debugging","$container","$log","createLogTemplate","context","append","find","ErrorHandler","$wrapper","$holder","html","instance","Constructor","TypeError","__esModule","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","protoProps","staticProps","prototype","obj","default"],"mappings":"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","file":"unzer.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import ApplePay from './payments/applepay';\nimport UnzerPayment from \"./payments/general\";\nimport Installment from \"./payments/instalment\";\n\nwindow.HpPayment = UnzerPayment;\nwindow.HpInstalment = Installment;\nwindow.UnzerApplePay = ApplePay;\n","import ErrorHandler from \"../utils/errors\";\nimport Debugging from \"../utils/debugging\";\n\n/** @type {ApplePaySnippets} */\nconst ApplePaySnippetsDefaults = {\n    NOT_SUPPORTED: \"This device does not support Apple Pay!\",\n    CANCEL_BY_USER: \"Canceled payment process by user!\"\n};\n\nexport default class ApplePay {\n    /**\n     * Similiar to the HeidelpayPayment class but slightly differently\n     * (apple pay works differently, so yeah, custom class it is :D)\n     *\n     * @class\n     * @param {String} pubKey\n     * @param {ApplePayPaymentRequest} applePayPaymentRequest\n     * @param {ApplePaySnippets} snippets\n     * @param {ApplePaySettings} settings\n     */\n    constructor(pubKey, applePayPaymentRequest, snippets, settings) {\n        /** @type {ApplePaySettings} */\n        this.settings = settings || {};\n\n        /** @type {ApplePaySnippets} */\n        this.snippets = Object.assign(ApplePaySnippetsDefaults, snippets);\n\n        var options = {\n            locale: this.settings.locale || 'de-DE'\n        };\n\n        /** @type {ApplePayPaymentRequest} */\n        this.applePayPaymentRequest = applePayPaymentRequest;\n        this.unzerInstance = new unzer(pubKey, options);\n        this.errorHandler = new ErrorHandler(this.settings.$errorContainer, this.settings.$errorMessage);\n        this.debugging = new Debugging($('.unzerUI'));\n        window.UNZER_DEBUG = !!this.unzerInstance._isSandbox || this.unzerInstance.config.hasSandboxKey; // Enable Debugging in sandbox mode\n\n        if (!window.ApplePaySession|| !window.ApplePaySession.canMakePayments()) {\n            this.unsupportedDevice();\n            return;\n        }\n\n        /** @type {HTMLElement} form Form in which the customer enters additional details */\n        this.form = this.settings.form || document.getElementById('form_payment_extra');\n\n        // Register Events\n        this.initPaymentType = this.initPaymentType.bind(this); // it's a trick! needed in order to overcome the remove event listener\n        this.form.addEventListener('submit', this.initPaymentType);\n        $('.apple-pay-button').on('click', this.initPaymentType.bind(this));\n    }\n\n    /**\n     * Init the payment type in this case means starting the apple pay session\n     * @param {Event} event\n     */\n    initPaymentType(event) {\n        event.preventDefault();\n\n        if (!window.ApplePaySession || !window.ApplePaySession.canMakePayments()) {\n            this.unsupportedDevice();\n            return;\n        }\n\n        // We adhere to Apple Pay version 6 to handle the payment request.\n        const session = new ApplePaySession(3, this.applePayPaymentRequest);\n        this.debugging.log('[> Init Payment Type]', {paymentRequest: this.applePayPaymentRequest});\n\n        session.onvalidatemerchant = (event) => {\n            this.merchantValidationCallback(event, session);\n        };\n\n        session.onpaymentauthorized = (event) => {\n            this.applePayAuthorizedCallback(event, session);\n        };\n\n        session.oncancel = (event) => {\n            this.debugging.log('[> Cancel]', {event});\n            this.errorHandler.show(this.snippets.CANCEL_BY_USER);\n        };\n\n        session.begin();\n    }\n\n    /**\n     * Call the merchant validation in the server-side integration (apple_pay_merchantvalidation)\n     * @param {Event} event\n     * @param {ApplePaySession} session\n     */\n    merchantValidationCallback(event, session) {\n        var validationUrl = JSON.stringify(event.validationURL);\n\n        this.debugging.log('[> Merchant Validation]', {event});\n\n        $.ajax({\n            'url': $.evo.io().options.ioUrl,\n            'method': 'POST',\n            'dataType': 'json',\n            'data': 'io={\"name\":\"apple_pay_merchantvalidation\", \"params\":[' + validationUrl + ']}',\n        }).done((validationResponse) => {\n            this.debugging.log('[> Merchant Validation Response]', validationResponse);\n\n            try {\n                session.completeMerchantValidation(validationResponse);\n            } catch (e) {\n                alert(e.message);\n            }\n        })\n        .fail((error) => {\n            this.debugging.log('[> Merchant Validation Error]', error);\n            this.errorHandler.show(JSON.stringify(error.statusText));\n            session.abort();\n        });\n    }\n\n    /**\n     * Create Apple Pay resource with unzer and save the resource id to charge it later.\n     *\n     * We do this here via AJAX instead of the validateAdditional method in the payment method to set the apple pay\n     * session state accordingly.\n     *\n     * @param {Event} event\n     * @param {ApplePaySession} session\n     */\n    applePayAuthorizedCallback(event, session) {\n        // Get payment data from event.\n        // \"event.payment\" also contains contact information, if they were set via Apple Pay.\n        var self = this;\n        var unzerApplePayInstance = this.unzerInstance.ApplePay();\n        var paymentData = event.payment.token.paymentData;\n\n        this.debugging.log('[> Payment Authorization]', {unzerApplePayInstance, event, paymentData});\n\n        // Create an Unzer instance with your public key\n        unzerApplePayInstance.createResource(paymentData)\n            .then(function (createdResource) {\n                // Hand over the type ID to your backend.\n                var typeId = JSON.stringify(createdResource.id);\n                $.ajax({\n                    'url': $.evo.io().options.ioUrl,\n                    'method': 'POST',\n                    'dataType': 'json',\n                    'data': 'io={\"name\":\"apple_pay_payment_authorized\", \"params\":[' + typeId + ']}',\n                }).done(function (result) {\n                    // Handle the transaction respone from backend.\n                    self.debugging.log('[> Payment Authorization Response]', {result, typeId});\n                    var status = result.transactionStatus;\n                    if (status === 'success' || status === 'pending') {\n                        session.completePayment({ status: window.ApplePaySession.STATUS_SUCCESS });\n\n                        // Append Payment Resource Id\n                        const hiddenInput = document.createElement('input');\n                        hiddenInput.setAttribute('type', 'hidden');\n                        hiddenInput.setAttribute('name', 'paymentData[resourceId]');\n                        hiddenInput.setAttribute('value', typeId);\n                        self.form.appendChild(hiddenInput);\n\n                        // Submitting the form\n                        self.form.removeEventListener('submit', self.initPaymentType);\n                        self.form.submit();\n                    } else {\n                        self.abortPaymentSession(session);\n                    }\n                }).fail(function (error) {\n                    self.errorHandler.show(error.statusText);\n                    self.abortPaymentSession(session);\n                });\n            })\n            .catch(function (error) {\n                self.debugging.log('[> Payment Authorization Error]', error);\n                self.errorHandler.show(error.message);\n                self.abortPaymentSession(session);\n            });\n    }\n\n    /**\n     * Handle Unsupported devices\n     */\n    unsupportedDevice() {\n        this.settings.submitButton.disabled = true;\n        this.settings.submitButton.ariaDisabled = true;\n        this.errorHandler.show(this.snippets.NOT_SUPPORTED);\n    }\n\n    /**\n     * abort current payment session.\n     * @param {ApplePaySession} session\n     */\n    abortPaymentSession(session) {\n        this.debugging.log('[> Abort Payment Session]', { status: window.ApplePaySession.STATUS_FAILURE });\n        session.completePayment({ status: window.ApplePaySession.STATUS_FAILURE });\n        session.abort();\n    }\n}\n","import ErrorHandler from \"../utils/errors\";\n\nexport default class UnzerPayment {\n    static PAYMENT_TYPES = {\n        ALIPAY: 'Alipay',\n        CARD: 'Card',\n        EPS: 'EPS',\n        FLEXIPAY_DIRECT: 'FlexiPay Direct',\n        HIRE_PURCHASE: 'Hire Purchase',\n        PAYPAL: 'Paypal',\n        INVOICE: 'Invoice',\n        INVOICE_FACTORING: 'Invoice Factoring',\n        INVOICE_GUARANTEED: 'Invoice Guaranteed',\n        SEPA: 'SEPA',\n        SEPA_GUARANTEED: 'SEPA (guaranteed)',\n        SOFORT: 'SOFORT',\n        GIROPAY: 'Giropay',\n        PRZELEWY24: 'Przelewy24',\n        IDEAL: 'iDEAL',\n        PREPAYMENT: 'Prepayment',\n        WECHAT_PAY: 'WeChat Pay',\n        PAYLATER_INVOICE: 'Paylater Invoice',\n        BANCONTACT: 'Bancontact',\n        PAYLATER_INSTALLMENT: 'Paylater Installment',\n    };\n\n    /**\n     * Heidelpay Payment Class\n     *\n     * @param {string} pubKey Public Key\n     * @param {string} type Payment Type\n     * @param {PaymentSettings} settings\n     */\n    constructor(pubKey, type, settings) {\n        /** @type {PaymentSettings} */\n        this.settings = settings || {};\n\n        var options = {\n            locale: this.settings.locale || 'de-DE'\n        };\n\n        this.unzerInstance = new unzer(pubKey, options);\n        this.errorHandler = new ErrorHandler(this.settings.$errorContainer, this.settings.$errorMessage);\n\n        /** @type {?string} customerId */\n        this.customerId = settings.customerId || null;\n\n        /** @type {{createCustomer: Function, updateCustomer: Function}|null} customerResource */\n        this.customerResource = null;\n\n        /** @type {{createResource: Function}} paymentType */\n        this.paymentType = this.initPaymentType(type);\n\n        /** @type {HTMLElement} form Form in which the customer enters additional details */\n        this.form = this.settings.form || document.getElementById('form_payment_extra');\n\n        // Register Events\n        this.handleFormSubmit = this.handleFormSubmit.bind(this); // it's a trick! needed in order to overcome the remove event listener\n        this.form.addEventListener('submit', this.handleFormSubmit);\n\n        if (this.settings.autoSubmit) {\n            // this.form.dispatchEvent(new Event('submit')); // Causes endless redirects in some browsers like FF, so we call the callback directly...\n            this.handleFormSubmit(new Event('submit'));\n        }\n    }\n\n    /**\n     * Init Payment Type\n     *\n     * @param {string} type\n     * @returns {object} payment type\n     * @throws Error if there is an unkown payment type\n     */\n    initPaymentType(type) {\n        switch (type) {\n            case UnzerPayment.PAYMENT_TYPES.CARD:\n                return this.createCard();\n\n            case UnzerPayment.PAYMENT_TYPES.INVOICE:\n                return this.createInvoice();\n\n            case UnzerPayment.PAYMENT_TYPES.INVOICE_GUARANTEED:\n                return this.createInvoiceGuaranteed();\n\n            case UnzerPayment.PAYMENT_TYPES.INVOICE_FACTORING:\n                return this.createInvoiceFactoring();\n\n            case UnzerPayment.PAYMENT_TYPES.SEPA:\n                return this.createSepa();\n\n            case UnzerPayment.PAYMENT_TYPES.SEPA_GUARANTEED:\n                return this.createSepaGuaranteed();\n\n            case UnzerPayment.PAYMENT_TYPES.PAYPAL:\n                return this.createPaypal();\n\n            case UnzerPayment.PAYMENT_TYPES.SOFORT:\n                return this.createSofort();\n\n            case UnzerPayment.PAYMENT_TYPES.GIROPAY:\n                return this.createGiropay();\n\n            case UnzerPayment.PAYMENT_TYPES.PRZELEWY24:\n                return this.createPrzelewy24();\n\n            case UnzerPayment.PAYMENT_TYPES.IDEAL:\n                return this.createIdeal();\n\n            case UnzerPayment.PAYMENT_TYPES.PREPAYMENT:\n                return this.createPrepayment();\n\n            case UnzerPayment.PAYMENT_TYPES.EPS:\n                return this.createEPS();\n\n            case UnzerPayment.PAYMENT_TYPES.FLEXIPAY_DIRECT:\n                return this.createFlexiPayDirect();\n\n            case UnzerPayment.PAYMENT_TYPES.ALIPAY:\n                return this.createAlipay();\n\n            case UnzerPayment.PAYMENT_TYPES.WECHAT_PAY:\n                return this.createWeChatPay();\n\n            case UnzerPayment.PAYMENT_TYPES.HIRE_PURCHASE:\n                return this.createHirePurchase();\n\n            case UnzerPayment.PAYMENT_TYPES.PAYLATER_INVOICE:\n                return this.createPaylaterInvoice();\n\n            case UnzerPayment.PAYMENT_TYPES.BANCONTACT:\n                return this.createBancontact();\n\n            case UnzerPayment.PAYMENT_TYPES.PAYLATER_INSTALLMENT:\n                return this.createPaylaterInstallment();\n\n            default:\n                throw new Error('Unkown Payment Type: ' + type);\n        }\n    }\n\n    /**\n     * Handle the form submit\n     *\n     * @param {Event} event Submit Event\n     */\n    handleFormSubmit(event) {\n        var self = this;\n        event.preventDefault();\n\n        // Creating a Payment resource and (optional) Customer Resource\n        var resources = [this.paymentType.createResource()];\n\n        if (this.customerResource) {\n            resources.push(this.customerId ? this.customerResource.updateCustomer() : this.customerResource.createCustomer());\n        }\n\n        Promise.all(resources).then(function (result) {\n            // Append Payment Resource Id\n            var hiddenInput = document.createElement('input');\n            hiddenInput.setAttribute('type', 'hidden');\n            hiddenInput.setAttribute('name', 'paymentData[resourceId]');\n            hiddenInput.setAttribute('value', result[0].id);\n            self.form.appendChild(hiddenInput);\n\n            // Append Customer Id\n            if (result.length >= 2) {\n                var hiddenCstInput = document.createElement('input');\n                hiddenCstInput.setAttribute('type', 'hidden');\n                hiddenCstInput.setAttribute('name', 'paymentData[customerId]');\n                hiddenCstInput.setAttribute('value', result[1].id);\n                self.form.appendChild(hiddenCstInput);\n            }\n\n            // Submitting the form\n            self.form.removeEventListener('submit', self.handleFormSubmit);\n            self.form.submit();\n        })\n        .catch(function (error) {\n            self.errorHandler.show(error.message);\n        });\n    }\n\n    /**\n     * Create (or update) customer resource.\n     *\n     * @param {?String} paymentTypeName\n     * @param {?String} multipleValidation\n     * @see https://docs.heidelpay.com/docs/customer-ui-integration\n     * @returns {{createCustomer: Function, updateCustomer: Function}} Customer Resource\n     */\n    createCustomer(paymentTypeName = null, multipleValidation = false) {\n        var Customer = this.settings.isB2B ? this.unzerInstance.B2BCustomer() : this.unzerInstance.Customer();\n        var customerObj = this.settings.customer || {};\n        var continueButton = this.settings.submitButton || document.getElementById(\"submit-button\");\n        let options = {\n            containerId: 'customer',\n            showInfoBox: false,\n            showHeader: false\n        };\n\n        if (paymentTypeName) {\n            options.paymentTypeName = paymentTypeName;\n        }\n\n        Customer.initFormFields(customerObj);\n        if (multipleValidation) {\n            continueButton.setAttribute('data-s360-valid', 0);\n            Customer.addEventListener('validate', (e) => {\n                console.log('customer validate', e, continueButton, continueButton.getAttribute('data-s360-valid'));\n\n                if (e.success) {\n                    if (continueButton.getAttribute('data-s360-valid') != 0) {\n                        continueButton.removeAttribute('disabled');\n                    }\n\n                    continueButton.setAttribute('data-s360-valid', 'customer');\n                    return;\n                }\n\n                continueButton.setAttribute('disabled', true);\n\n                // only invalidate if the customer was valid before\n                if (continueButton.getAttribute('data-s360-valid') == 'customer') {\n                    continueButton.setAttribute('data-s360-valid', 0);\n                }\n            });\n        } else {\n            Customer.addEventListener('validate', (e) => {\n                if (e.success) {\n                    continueButton.removeAttribute('disabled');\n                    return;\n                }\n\n                continueButton.setAttribute('disabled', true);\n            });\n        }\n\n        if (this.customerId) {\n            options.fields = ['name', 'birthdate'];\n\n            // if (this.settings.isB2B) {\n            //     options = {containerId: 'customer'};\n            // }\n\n            Customer.update(this.customerId, options);\n\n            return Customer;\n        }\n\n        Customer.create(options);\n\n        return Customer;\n    }\n\n    /**\n     * Create Paylayter Installment Payment Type\n     *\n     * @see https://docs.unzer.com/payment-methods/unzer-installment-upl/accept-unzer-installment-ui-component/\n     * @returns {{createResource: Function}}\n     */\n    createPaylaterInstallment() {\n        this.customerResource = this.createCustomer('paylater-installment', true);\n\n        const continueButton = this.settings.submitButton || document.getElementById(\"submit-button\");\n        const paylaterInstallment = this.unzerInstance.PaylaterInstallment();\n\n        paylaterInstallment.create({\n            containerId: 'paylater-installment',\n            amount: this.settings.amount,\n            currency: this.settings.currency,\n            country: this.settings.country\n        });\n\n        paylaterInstallment.addEventListener('paylaterInstallmentEvent', (e) => {\n            switch (e.currentStep) {\n                case 'plan-list':\n                    continueButton.setAttribute('disabled', true);\n                    break;\n\n                case 'plan-detail':\n                    continueButton.setAttribute('disabled', false);\n                    break;\n\n                default:\n                    break;\n            }\n\n            if (e.action === 'validate' && e.success) {\n                if (continueButton.getAttribute('data-s360-valid') != 0) {\n                    continueButton.removeAttribute('disabled');\n                }\n\n                continueButton.setAttribute('data-s360-valid', 'paylater-installment');\n                return;\n            }\n\n            continueButton.setAttribute('disabled', true);\n\n            // only invalidate if the paylater-installment was valid before\n            if (continueButton.getAttribute('data-s360-valid') == 'paylater-installment') {\n                continueButton.setAttribute('data-s360-valid', 0);\n            }\n        });\n\n        return paylaterInstallment;\n    }\n\n    /**\n     * Create Paylayter Invoice Payment Type\n     *\n     * @see https://docs.unzer.com/payment-methods/unzer-invoice-upl/accept-unzer-invoice-upl-ui-component/\n     * @returns {{createResource: Function}}\n     */\n    createPaylaterInvoice() {\n        this.customerResource = this.createCustomer('paylater-invoice', true);\n        const continueButton = this.settings.submitButton || document.getElementById(\"submit-button\");\n        const paylaterInvoice = this.unzerInstance.PaylaterInvoice();\n\n        paylaterInvoice.create({\n            containerId: 'paylater-invoice',\n            customerType: this.settings.isB2B ? 'B2B' : 'B2C'\n        });\n\n        paylaterInvoice.addEventListener('change', (e) => {\n            console.log('payleterinvoice', e, continueButton, continueButton.getAttribute('data-s360-valid'));\n            if (e.success) {\n                if (continueButton.getAttribute('data-s360-valid') != 0) {\n                    continueButton.removeAttribute('disabled');\n                }\n\n                continueButton.setAttribute('data-s360-valid', 'paylater-invoice');\n                return;\n            }\n\n            continueButton.setAttribute('disabled', true);\n\n            // only invalidate if the paylater-invoice was valid before\n            if (continueButton.getAttribute('data-s360-valid') == 'paylater-invoice') {\n                continueButton.setAttribute('data-s360-valid', 0);\n            }\n        });\n\n        return paylaterInvoice;\n    }\n\n    /**\n     * Create Bancontact Payment Type\n     *\n     * @see https://docs.unzer.com/payment-methods/bancontact/accept-bancontact-ui-component/\n     * @returns {{createResource: Function}}\n     */\n    createBancontact() {\n        const bancontact = this.unzerInstance.Bancontact();\n        const styling = { fontSize: null, fontColor: null, fontFamily: null };\n\n        if (this.settings.styling) {\n            styling.fontColor = this.settings.styling.fontColor || null;\n            styling.fontSize = this.settings.styling.fontSize || null;\n            styling.fontFamily = this.settings.styling.fontFamily || null;\n        }\n\n        bancontact.create('holder', {\n            containerId: 'bancontact-holder',\n            fontSize: styling.fontSize,\n            fontColor: styling.fontColor,\n            fontFamily: styling.fontFamily\n        });\n\n        return bancontact;\n    }\n\n    /**\n     * Create a new Card Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/credit-card-ui-integration\n     * @returns {{createResource: Function}} Card Payment Type\n     */\n    createCard() {\n        var Card = this.unzerInstance.Card();\n        var styling = {fontSize: null, fontColor: null, fontFamily: null};\n\n        if (this.settings.styling) {\n            styling.fontColor = this.settings.styling.fontColor || null;\n            styling.fontSize = this.settings.styling.fontSize || null;\n            styling.fontFamily = this.settings.styling.fontFamily || null;\n        }\n\n        Card.create('number', {\n            containerId: 'card-element-id-number',\n            onlyIframe: false,\n            fontSize: styling.fontSize,\n            fontColor: styling.fontColor,\n            fontFamily: styling.fontFamily\n        });\n        Card.create('expiry', {\n            containerId: 'card-element-id-expiry',\n            onlyIframe: false,\n            fontSize: styling.fontSize,\n            fontColor: styling.fontColor,\n            fontFamily: styling.fontFamily\n        });\n        Card.create('cvc', {\n            containerId: 'card-element-id-cvc',\n            onlyIframe: false,\n            fontSize: styling.fontSize,\n            fontColor: styling.fontColor,\n            // fontFamily: styling.fontFamily // messes with hidden font in firefox\n        });\n\n        // Enable pay button initially\n        var self = this;\n        var formFieldValid = {};\n\n        /** @type {HTMLElement} continueButton */\n        var continueButton = self.settings.submitButton || document.getElementById(\"submit-button\");\n        continueButton.setAttribute('disabled', true);\n\n        var eventHandlerCardInput = function (e) {\n            if (e.success) {\n                formFieldValid[e.type] = true;\n                self.errorHandler.hide();\n            }\n\n            if (e.error) {\n                formFieldValid[e.type] = false;\n                self.errorHandler.show(e.error);\n            }\n\n            if (formFieldValid.number && formFieldValid.expiry && formFieldValid.cvc) {\n                continueButton.removeAttribute('disabled');\n                return;\n            }\n\n            continueButton.setAttribute('disabled', true);\n        };\n\n        Card.addEventListener('change', eventHandlerCardInput);\n\n        return Card;\n    }\n\n    /**\n     * Create a new Invoice Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/invoice-ui-integration\n     * @returns {{createResource: Function}} Invoice Payment Type\n     */\n    createInvoice() {\n        return this.unzerInstance.Invoice();\n    }\n\n    /**\n     * Create a new Invoice Guaranteed Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/invoice-ui-integration\n     * @returns {{createResource: Function}} Invoice Payment Type\n     */\n    createInvoiceGuaranteed() {\n        this.customerResource = this.createCustomer();\n\n        return this.unzerInstance.InvoiceSecured();\n    }\n\n    /**\n     * Create a new Invoice Factoring Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/invoice-ui-integration\n     * @returns {{createResource: Function}} Invoice Payment Type\n     */\n    createInvoiceFactoring() {\n        this.customerResource = this.createCustomer();\n\n        return this.unzerInstance.InvoiceSecured();\n    }\n\n    /**\n     * Create a new SEPA Direct Debit Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/sepa-direct-debit-ui-integration\n     * @returns {{createResource: Function}} SEPA Direct Debit Payment Type\n     */\n    createSepa() {\n        var Sepa = this.unzerInstance.SepaDirectDebit();\n        Sepa.create('sepa-direct-debit', {\n            containerId: 'sepa-IBAN'\n        });\n\n        /** @type {HTMLElement} continueButton */\n        const continueButton = this.settings.submitButton || document.getElementById(\"submit-button\");\n        continueButton.setAttribute('disabled', true);\n\n        Sepa.addEventListener('change', (e) => {\n            if (e.success) {\n                continueButton.removeAttribute('disabled');\n                this.errorHandler.hide();\n                return;\n            }\n\n            continueButton.setAttribute('disabled', true);\n        });\n\n        return Sepa;\n    }\n\n    /**\n     * Create a new SEPA Direct Debit (guaranteed) Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/sepa-direct-debit-ui-integration\n     * @returns {{createResource: Function}} SEPA Direct Debit (guaranteed) Payment Type\n     */\n    createSepaGuaranteed() {\n        var SepaGuaranteed = this.unzerInstance.SepaDirectDebitSecured();\n        SepaGuaranteed.create('sepa-direct-debit-guaranteed', {\n            containerId: 'sepa-guaranteed-IBAN'\n        });\n\n        /** @type {HTMLElement} continueButton */\n        const continueButton = this.settings.submitButton || document.getElementById(\"submit-button\");\n        continueButton.setAttribute('disabled', true);\n\n        SepaGuaranteed.addEventListener('change', (e) => {\n            if (e.success) {\n                continueButton.removeAttribute('disabled');\n                this.errorHandler.hide();\n                return;\n            }\n\n            continueButton.setAttribute('disabled', true);\n        });\n\n        this.customerResource = this.createCustomer();\n\n        return SepaGuaranteed;\n    }\n\n    /**\n     * Create a new PayPal Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/paypal-ui-integration\n     * @returns {{createResource: Function}} Papal Payment Type\n     */\n   createPaypal() {\n        var Paypal = this.unzerInstance.Paypal();\n        Paypal.create('email', {\n            containerId: 'paypal-element-email'\n        });\n\n        return Paypal;\n    }\n\n    /**\n     * Create a new SOFORT Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/redirect-ui-integration#sofort\n     * @returns {{createResource: Function}} Sofort Payment Type\n     */\n    createSofort() {\n        return this.unzerInstance.Sofort();\n    }\n\n    /**\n     * Create a new Giropay Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/redirect-ui-integration#giropay\n     * @returns {{createResource: Function}} Giropay Payment Type\n     */\n    createGiropay () {\n        return this.unzerInstance.Giropay();\n    }\n\n    /**\n     * Create a new Przelewy24 Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/redirect-ui-integration#przelewy24\n     * @returns {{createResource: Function}} Przelewy24 Payment Type\n     */\n    createPrzelewy24() {\n        return this.unzerInstance.Przelewy24();\n    }\n\n    /**\n     * Create a new iDEAL Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/ideal-ui-integration\n     * @returns {{createResource: Function}} iDEAL Payment Type\n     */\n    createIdeal() {\n        var Ideal = this.unzerInstance.Ideal();\n\n        Ideal.create('ideal', {\n            containerId: 'ideal-element'\n        });\n\n        /** @type {HTMLElement} continueButton */\n        const continueButton = this.settings.submitButton || document.getElementById(\"submit-button\");\n        continueButton.setAttribute('disabled', true);\n\n        Ideal.addEventListener('change', (e) => {\n            if (e.value) {\n                continueButton.removeAttribute('disabled');\n                this.errorHandler.hide();\n                return;\n            }\n\n            continueButton.setAttribute('disabled', true);\n        });\n\n        return Ideal;\n    }\n\n    /**\n     * Create a new Prepayment Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/prepayment-ui-integration\n     * @returns {{createResource: Function}} Prepayment Payment Type\n     */\n    createPrepayment() {\n        return this.unzerInstance.Prepayment();\n    }\n\n    /**\n     * Create a new EPS Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/eps-ui-integration\n     * @returns {{createResource: Function}} EPS Payment Type\n     */\n    createEPS() {\n        var EPS = this.unzerInstance.EPS();\n\n        EPS.create('eps', {\n            containerId: 'eps-element'\n        });\n\n        return EPS;\n    }\n\n    /**\n     * Create a new FlexiPay Direct Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/redirect-ui-integration#flexipay-direct\n     * @returns {{createResource: Function}} Alipay Payment Type\n     */\n    createFlexiPayDirect() {\n        return this.unzerInstance.FlexiPayDirect();\n    }\n\n    /**\n     * Create a new Alipay Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/redirect-ui-integration#alipay\n     * @returns {{createResource: Function}} Alipay Payment Type\n     */\n    createAlipay() {\n        return this.unzerInstance.Alipay();\n    }\n\n    /**\n     * Create an new WeChat Pay Payment Type.\n     *\n     * @see https://docs.heidelpay.com/docs/redirect-ui-integration#wechat-pay\n     * @returns {{createResource: Function}} WeChat Pay Payment Type\n     */\n    createWeChatPay() {\n        return this.unzerInstance.Wechatpay();\n    }\n\n    /**\n     * Create a new Hire Purchase Payment Type.\n     *\n     * @see https:://docs.heidelpay.com/docs/hire-purchase-ui-integration\n     * @returns {{createResource: Function}} Hire Purchase Payment Type\n     */\n   createHirePurchase() {\n        var InstallmentSecured = this.unzerInstance.InstallmentSecured();\n        var self = this;\n        this.customerResource = this.createCustomer();\n\n        /** @type {HTMLElement} continueButton */\n        var continueButton = self.settings.submitButton || document.getElementById(\"submit-button\");\n        continueButton.setAttribute('style', 'display: none');\n        continueButton.setAttribute('disabled', true);\n\n        InstallmentSecured.create({\n            containerId: 'hire-purchase-element',\n            amount: this.settings.amount || null,\n            currency: this.settings.currency || null,\n            effectiveInterest: this.settings.effectiveInterest || null,\n            orderDate: this.settings.orderDate || null\n        }).then(function (data) {\n            // if successful, notify the user that the list of installments was fetched successfully\n            // in case you were using a loading element during the fetching process,\n            // you can remove it inside this callback function\n        })\n        .catch(function (response) {\n            // sent an error message to the user (fetching installment list failed)\n            var msg = '';\n            console.error(response.message);\n\n            response.error.details.forEach(function(err) {\n                console.error('API-Error: ' + err.code);\n                msg += err.customerMessage;\n            });\n\n            self.errorHandler.show(msg);\n        });\n\n\n        // Listen to UI events\n        InstallmentSecured.addEventListener('installmentSecuredEvent', function (e) {\n            if (e.action === 'validate') {\n                if (e.success) {\n                    continueButton.removeAttribute('disabled');\n                    return;\n                }\n\n                continueButton.setAttribute('disabled', true);\n            }\n\n            if (e.action === 'change-step') {\n                if (e.currentSteep === 'plan-list') {\n                    continueButton.setAttribute('style', 'display: none');\n                    continueButton.setAttribute('disabled', true);\n                    return;\n                }\n\n                continueButton.setAttribute('style', 'display: inline-block');\n            }\n        });\n\n        return InstallmentSecured;\n    }\n}\n","/**\n * Heidelpay Installment Modal Window Handler\n *\n * @param {string} modalSelector\n * @param {HTMLElement} btn Submit Trigger\n * @param {JQuery<HTMLElement>} $form\n */\nconst Installment = (modalSelector, btn, $form) => {\n    var modal = $(modalSelector);\n\n    btn.addEventListener('click', function () {\n        $form.trigger('submit');\n    });\n\n    $form.on('submit', function (e) {\n        if (!modal.is(':visible')) {\n            e.preventDefault();\n            modal.modal('show');\n            return false;\n        }\n\n        return true;\n    });\n};\n\nexport default Installment;","export default class Debugging {\n    constructor($container) {\n        this.$container = $container;\n        this.$log = null;\n\n        if (!window.UNZER_DEBUG) {\n            return;\n        }\n\n        this.createLogTemplate();\n    }\n\n    log(context, data = {}) {\n        if (!window.UNZER_DEBUG) {\n            return;\n        }\n\n        if (!this.$log) {\n            this.createLogTemplate();\n        }\n\n        this.$log.append(\n            '<li><strong>' + context + '</strong><pre>' + JSON.stringify(data,  null, '  ') +  '</pre></li>'\n        );\n    }\n\n    createLogTemplate() {\n        this.$container.append(\n            $('<div class=\"debug-log card card-body bg-light\"><ul class=\"list-unstyled\"></ul></div>')\n        );\n        this.$log = this.$container.find('.debug-log > ul');\n    }\n}\n","export default class ErrorHandler {\n    /**\n     * @param {JQuery<HTMLElement>|null} $wrapper Wrapper for Container to display error messages in\n     * @param {JQuery<HTMLElement>|null} $holder Container to display error messages in\n     */\n    constructor($wrapper, $holder) {\n        this.$wrapper = $wrapper || $('#error-container');\n        this.$holder = $holder || this.$wrapper.find('.alert');\n    }\n\n    /**\n     * Show Error message\n     * @param {String} message\n     */\n    show(message) {\n        this.$wrapper.show();\n        this.$holder.html(message);\n    }\n\n    /**\n     * Hide error message\n     */\n    hide() {\n        this.$wrapper.hide();\n        this.$holder.html();\n    }\n}\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"]}